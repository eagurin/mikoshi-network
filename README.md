# Mikoshi Network

![mikoshi](https://mikoshi.company/cache/image/generations/cd5e8080-de9f-4523-8097-e47ec5193047.png)

## Описание

Данный проект представляет собой комплексное приложение, развернутое с использованием Docker Compose. В его состав входят следующие ключевые сервисы:

- **Hatchet**: платформа для управления DevOps-процессами.
- **RagToRiches (R2R)**: основное приложение, использующее возможности Hatchet.
- **Ollama и Open Web UI**: сервисы для работы с моделями Ollama через веб-интерфейс.
- **Мониторинг и логирование**: включает Prometheus, Grafana и другие инструменты для сбора и визуализации метрик.
- **Traefik**: обратный прокси-сервер для маршрутизации запросов и управления SSL-сертификатами.

## Требования

- Установленные **Docker** и **Docker Compose**.
- Настроенные DNS-записи для доменов, используемых сервисами (например, `mikoshi.company`, `api.mikoshi.company` и другие).
- Доступные порты: `80`, `443` и дополнительные, указанные в `docker-compose.yml`.

## Установка и запуск

1. **Клонируйте репозиторий** проекта и перейдите в его директорию.

2. **Настройте переменные окружения** в файле `.env`, включая данные для PostgreSQL, API-ключи и другие необходимые параметры.

3. **Запустите сервисы** с помощью команды:

   ```bash
   docker-compose up -d
   ```

   Это запустит все сервисы в фоновом режиме.

## Основные сервисы

### Hatchet

- **postgres**: база данных PostgreSQL с расширением `pgvector`.
- **hatchet-engine**: основной сервис платформы Hatchet.
- **hatchet-dashboard**: веб-интерфейс для управления Hatchet.

### RagToRiches (R2R)

- **r2r**: основное приложение R2R.
- **r2r-dashboard**: веб-интерфейс для взаимодействия с R2R.

### Ollama и Open Web UI

- **ollama**: сервис для работы с моделями Ollama.
- **open-webui**: веб-интерфейс для взаимодействия с Ollama.

### Мониторинг

- **prometheus**: сбор метрик от сервисов.
- **grafana**: визуализация метрик и дашборды.
- **postgres-exporter**, **cadvisor**, **node-exporter**: экспортеры метрик для Prometheus.

### Traefik

- **traefik**: обратный прокси-сервер, маршрутизирующий запросы к сервисам и управлением SSL-сертификатами через Let's Encrypt.

## Доступ к сервисам

После запуска приложения сервисы будут доступны по следующим адресам:

- **R2R API**: https://api.mikoshi.company
- **R2R Dashboard**: https://r2r.mikoshi.company
- **Hatchet Dashboard**: https://hatchet.mikoshi.company
- **Open Web UI**: https://mikoshi.company
- **Ollama API**: https://ollama.mikoshi.company
- **Prometheus**: https://prometheus.mikoshi.company
- **Grafana**: https://grafana.mikoshi.company

Убедитесь, что DNS-записи для этих доменов правильно настроены и указывают на ваш сервер.

## Примечания

- **Ресурсы сервера**: некоторые сервисы (например, Ollama и Open Web UI) могут требовать значительных ресурсов (CPU и RAM). Убедитесь, что у вас достаточно мощный сервер для их работы.
- **Безопасность**: храните конфиденциальные данные (пароли, API-ключи) в безопасном месте и не размещайте их в открытом доступе.
- **SSL-сертификаты**: Traefik автоматически получит SSL-сертификаты для указанных доменов. Проверьте корректность настроек электронной почты и доменов в конфигурации Traefik.
- **API-ключи и переменные окружения**: убедитесь, что все необходимые API-ключи и переменные окружения указаны в файле `.env` или непосредственно в `docker-compose.yml`.

## Обновление сервисов

Для обновления сервисов до последних версий выполните:

```bash
docker-compose pull
docker-compose up -d
```

## Обратная связь

Если возникнут вопросы или проблемы с установкой и запуском, пожалуйста, создайте issue в репозитории или свяжитесь с разработчиками.
